---
author: wanls4583
comments: true
date: 2021-09-12
layout: post
title: ie低版本兼容
categories:
- 其他

tags:
- 其他
---
在ie7及以下浏览器：
- position:absolute的父元素必须拥有haslayout，否则其定位将不准确，且会影响兄弟元素的布局。
- 当form元素中有内容时，其默认有20px外边距。
- 由于幽灵节点的影响，input基线对齐幽灵节点后，导致其默认有1px的外边距，可通过使input浮动或者设置其vertical-align消除。
- 当元素获得haslayout后，即使元素内部没有内容，其也会有一个的默认行高撑起其高度，其高度为字体大小加2px，当font-size为0时，其行高为2px。由于ie6高度属性的特性，设置height:0只会让元素获得haslayout，而不会有其他效果。让元素获得haslayout的样式有：
  - zoom不为0;
  - float不为none
  - height不为auto（ie7中，内联元素height无效）
  - width不为auto（ie7中，内联元素width无效）
  - display:inline-block
  - position:absolute,fixed（注意ie6不支持fixed）
  - overflow\|overflow-x\|overflow-y不为visible（ie7）
  - min-height（ie7）
  - min-width（ie7）
  - max-height不为none（ie7）
  - max-width不为none（ie7）
- 除了display:inline-block触发的haslayout无法重置外，其他方式触发的haslayout都可以通过重新设置默认值（在其他规则中用默认值覆盖）使其取消haslayout。
- 给block元素添加样式display:inline-block，只是触发haslayout，和zoom:1的效果相同。
- 没有layout特性的元素的clientWidth/clientHeight属性总是返回0。
- 当浮动元素，内联块元素（inline-block元素，block元素在ie7以下浏览器中需用display:inline;zoom:1触发），绝对定位元素没有设置宽度时，这时内部子元素设置百分比宽度后：
  - 现代浏览器将按照父元素的实际内部宽度去乘以百分比得出子元素的宽度；
  - ie7将忽略百分比宽度，并且使其表现为inline-block；
  - ie6浏览器中，将会向上找到可设置百分比宽度的父元素，将其宽度设置为该百分比宽度，再来设置子元素的宽度，具体情况如[【示例1】](#test1)所示。
- 当元素为浮动元素，内联块元素，绝对定位元素，这时内部子元素触发haslayout后：
  - ie7中子元素将表现为inline-block；
  - ie6浏览器中，如果子元素是block元素，则其相当于设置了width:100%，表现如上所述；
- 当元素设置了position:relative，且没有haslayout，此时元素顶部半行距高度的背景色将缺失，具体情况如[【示例2】](#test2)所示。

<a name="test1">示例1：</a>

```html
<body>
    <div style="position:relative;color:#fff;white-space:nowrap;">
        <div style="position:absolute;background:red;">
            <div>
                <div id="test1" style="width:50%;background:blue;">哈哈哈哈</div>
                <span id="test2" style="background:green;">哈哈哈哈哈</span>
            </div>
        </div>
    </div>
</body>
```

ie6中结果：

![](https://wanls4583.github.io/images/posts/其他/ie低版本兼容/1.png)

ie7中结果：

![](https://wanls4583.github.io/images/posts/其他/ie低版本兼容/2.png)

现代浏览器中结果：

![](https://wanls4583.github.io/images/posts/其他/ie低版本兼容/3.png)

<a name="test2">示例2：</a>

```html
<body>
    <div style="position:absolute;background:red;line-height:100px;color:#fff;">
        <div id="test1" style="background:blue;position:relative;">哈哈哈</div>
    </div>
</body>
```

ie6，ie7中结果：

![](https://wanls4583.github.io/images/posts/其他/ie低版本兼容/4.png)

[haslayout触发方式详细列表](https://blog.lisong.hn.cn//code/%E5%85%B6%E4%BB%96/layout/layout.html)

以下元素，默认具有haslayout：
- &lt;html&gt;, &lt;body&gt;
- &lt;table&gt;, &lt;tr&gt;, &lt;th&gt;, &lt;td&gt;
- &lt;img&gt;
- &lt;hr&gt;
- &lt;input&gt;, &lt;button&gt;, &lt;select&gt;, &lt;textarea&gt;, &lt;fieldset&gt;, &lt;legend&gt;
- &lt;iframe&gt;, &lt;embed&gt;, &lt;object&gt;, &lt;applet&gt;
- &lt;marquee&gt;

ie6浏览器：
- 不支持min-width，min-height，不过给元素定义width和height后，其表现和min-width、min-height一致。
- 子元素absolute定位后，relative的父元素如果没有触发haslayout，则子元素的left:0的位置将对应于父元素的padding-left的位置。
- 子元素absolute定位后，relative的父元素如果没有触发haslayout，则子元素的bottom:0的位置将对应于距离父元素往下一个窗口高度的位置。




